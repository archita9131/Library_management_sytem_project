<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Library Management System</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI",sans-serif;}
body{background:linear-gradient(135deg,#667eea,#764ba2);display:flex;justify-content:center;align-items:center;min-height:100vh;}
.wrapper{width:900px;max-width:95%;background:#fff;border-radius:14px;box-shadow:0 20px 40px rgba(0,0,0,0.25);overflow:hidden;}
.topbar{display:flex;justify-content:flex-end;background:#f1f3f6;}
.topbar button{padding:12px 24px;border:none;background:#e4e7ec;cursor:pointer;font-size:14px;}
.topbar button.active{background:#667eea;color:#fff;font-weight:600;}
.content{display:flex;min-height:480px;}

.left{width:50%;background:linear-gradient(135deg,#4facfe,#00f2fe);color:#fff;padding:40px 35px;display:flex;flex-direction:column;justify-content:center;}
.left h1{font-size:28px;margin-bottom:14px;}
.left p{font-size:14px;margin-bottom:18px;}
.features{list-style:none;font-size:14px;line-height:1.9;}

.right{width:50%;padding:25px 30px 15px 30px;display:flex;flex-direction:column;justify-content:space-between;}

.right-visual{text-align:center;margin-bottom:18px;}
.visual-images{display:flex;gap:15px;justify-content:space-between;margin-bottom:12px;}
.visual-images div{width:48%;}
.visual-images img,.single-image img{width:100%;height:170px;object-fit:cover;border-radius:12px;box-shadow:0 10px 22px rgba(0,0,0,0.18);}
.explore-box{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:10px;border-radius:8px;font-weight:600;font-size:14px;}

.form{display:none;}
.form.active{display:block;}
h2{text-align:center;margin-bottom:12px;}
input{width:100%;padding:9px;margin:6px 0;border-radius:6px;border:1px solid #ccc;}

button.login-btn{width:100%;padding:10px;margin-top:8px;border:none;border-radius:6px;background:#667eea;color:#fff;font-size:14px;cursor:pointer;}
button.login-btn:hover{background:#5563d6;}

.message{text-align:center;margin-top:6px;font-size:12px;}
.link{text-align:center;font-size:12px;margin-top:6px;color:#667eea;cursor:pointer;}
.footer{text-align:center;font-size:12px;color:#6b7280;font-weight:500;}
</style>
</head>

<body>
<div class="wrapper">
  <div class="topbar">
    <button id="adminBtn" onclick="showAdmin()">Admin</button>
    <button id="userBtn" onclick="showUser()">User</button>
  </div>

  <div class="content">
    <div class="left">
      <h1>üìö Library Management System</h1>
      <p>Discover, manage, and track books effortlessly with a modern digital library experience.</p>
      <ul class="features">
        <li>‚ú® Smart & Secure Access</li>
        <li>üìñ Easy Book Management</li>
        <li>‚è≥ Quick Issue & Return</li>
        <li>üìä Organized Records</li>
      </ul>
    </div>

    <div class="right">
      <div>
        <div class="right-visual" id="visualSection">
          <div class="visual-images">
            <div><img src="https://images.unsplash.com/photo-1507842217343-583bb7270b66"></div>
            <div><img src="https://images.unsplash.com/photo-1512820790803-83ca734da794"></div>
          </div>
          <div class="single-image">
            <img src="https://png.pngtree.com/background/20250215/original/pngtree-modern-library-oasis-students-engaged-in-study-spacious-space-a-cozy-picture-image_15932775.jpg">
          </div>
          <div class="explore-box">EXPLORE LIBRARY</div>
        </div>

        <!-- ADMIN LOGIN -->
        <div id="adminForm" class="form">
          <h2>Admin Login</h2>
		  <form autocomplete="off">
           <input type="text" id="adminUser" placeholder="Admin Username" autocomplete="new-password">
           <input type="password" id="adminPass" placeholder="Password" autocomplete= "new-password">
		  </form>
          <button class="login-btn" onclick="adminLogin()">Login</button>
          <div id="adminMsg" class="message"></div>
        </div>

        <!-- USER LOGIN -->
        <div id="userForm" class="form">
          <h2>User Login</h2>

          <div id="loginBox">
		    <form autocomplete="off">
             <input type="text" id="userId" placeholder="User ID" autocomplete="new-password">
             <input type="password" id="userPass" placeholder="Password" autocomplete="new-password">
		    </form>
            <button class="login-btn" onclick="userLogin()">Login</button>
          </div>

          <div class="link" onclick="toggleRegister()">New user? Register</div>

          <div id="registerBox" style="display:none;">
		  <form autocomplete="off">
            <input type="text" id="newUser" placeholder="Create User ID" autocomplete="new-password">
            <input type="password" id="newPass" placeholder="Create Password" autocomplete="new-password">
		  </form>
            <button class="login-btn" style="background:#00b894" onclick="registerUser()">Register</button>
          </div>

          <div id="userMsg" class="message"></div>
        </div>
      </div>

      <div class="footer" id="footerText">Welcome to the Library Portal</div>
    </div>
  </div>
</div>

<script>
function hideVisual(){ visualSection.style.display="none"; }

function showAdmin(){
  hideVisual();
  adminForm.classList.add("active");
  userForm.classList.remove("active");
  adminBtn.classList.add("active");
  userBtn.classList.remove("active");
  footerText.innerText="üîê Secure access for administrators";
}

function showUser(){
  hideVisual();
  userForm.classList.add("active");
  adminForm.classList.remove("active");
  userBtn.classList.add("active");
  adminBtn.classList.remove("active");
  footerText.innerText="üìö Access your library account";
}
function adminLogin(){
  fetch("/login", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({
      username: adminUser.value,
      password: adminPass.value
    })
  })
  .then(res => res.json())
  .then(data => {
    if(data.success && data.role === "admin"){
      window.location.href = "admin.html";
    } else {
      adminMsg.innerText = "Invalid admin credentials";
      adminMsg.style.color = "red";
    }
  })
  .catch(() => {
    adminMsg.innerText = "Server error";
    adminMsg.style.color = "red";
  });
}

function toggleRegister(){
  registerBox.style.display = registerBox.style.display==="none" ? "block":"none";
  loginBox.style.display = loginBox.style.display==="none" ? "block":"none";
  userMsg.innerText="";
}

/* üî• REGISTER USING FLASK */
function registerUser(){
  fetch("/register",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({username:newUser.value,password:newPass.value})
  })
  .then(res=>res.json())
  .then(data=>{
    userMsg.innerText=data.message;
    userMsg.style.color=data.success?"green":"red";
    if(data.success){
      newUser.value=""; newPass.value="";
      registerBox.style.display="none";
      loginBox.style.display="block";
      userId.value=""; userPass.value="";
    }
  });
}

/* üî• LOGIN USING FLASK */
function userLogin(){
  fetch("/login",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({username:userId.value,password:userPass.value})
  })
  .then(res=>res.json())
  .then(data=>{
    if(data.success){
      window.location.href="user.html";
    } else {
      userMsg.innerText=data.message;
      userMsg.style.color="red";
    }
  });
}
</script>
</body>
</html>

